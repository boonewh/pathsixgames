{% extends "base.html" %}

{% block title %}PathSix Games | Reign of Winter{% endblock %}

{% block meta_description %}<meta name="description" content="PathSix is a website for friends who have been playing rpgs together for three decades. This is the main page for our current Pathfinder campaign, Reign of Winter.">{% endblock %}

{% block content %}
    <main>
        <div class="hero">
            <img src="{{ url_for('static', filename='images/baba_yaga_hero.jpg') }}" alt="Baba Yaga header image" class="heroImg">
            <div class="heroWelcome">
                <h1>Welcome To Our Game Page!</h1>
                <h2>"Reign of Winter"</h2>
                <h3>Our Winter Expedition Has Begun!</h3>
                <p>
                    Welcome to our chilling expedition into the icy realms of Golarion and beyond, where the cold conceals ancient mysteries! Follow our bold heroes as they unravel the secrets of a wintry curse threatening the lands. What truths lie buried beneath the snow? What perils await in the frozen reaches? Step into our adventure log and join us to uncover the fate of the world as the threads of winter weave their tale!
                </p>
                <h2>Follow Our Party's Journey!</h2>
                <p>
                    Warning! Spoilers for the "Reign of Winter" Adventure Path.
                </p>
                <button onclick="window.location.href='/book/snows-of-summer';">Adventure Log</button>
            </div>
        </div>
    
        <section class="container1">
            <div id="advenPath">
                <h3 >The Adventure Path</h3>
                <p>We are playing the "Reign of Winter" Adventure Path sold by Paizo, Inc.</p>
                    <blockquote>
                        It has been a century since the immortal witch Baba Yaga last visited the world, and the hour draws nigh for her return. But when she fails to appear in the frozen realm of Irrisen to usher in its newest ruler, pockets of winter begin to grow throughout the Inner Sea. After 1,400 years of perpetual winter, the icy curse of Irrisen is spreading! What links do these strange blizzards and swaths of wintry landscapes have with Irrisen, and is there any truth to the growing rumors that the Witch Queen Elvanna has taken full control of the realm? Can her plans for the Inner Sea be thwarted, or will the Reign of Winter engulf the world?
                    </blockquote>
                    <cite>
                        &mdash; Paizo Adventure Path Teaser
                    </cite>
            </div>
            <a href="{{ url_for('static', filename='images/irrisen.jpg') }}" target="_blank"><img src="{{ url_for('static', filename='images/irrisen.jpg') }}" alt="Irrisen map, the current area of the adventure." id="currentMap"></a>
        </section>
    
        <aside class="container2">
            <a href="https://www.d20srd.org/srd/variant/classes/gestaltCharacters.htm"><img src="{{ url_for('static', filename='images/gestalt-link.jpg') }}" alt="Link to Gestalt characters rules"></a>
            <a href="https://www.sortekanin.com/collection/items/"><img src="{{ url_for('static', filename='images/SorteKanin_link.jpg') }}" alt="SorteKanin Treasure Database"></a>
        </aside>

        <h1>The Party</h1>
        <div class="container4 pop">
            <div class="subCon1">
                <figure>
                    <img src="{{ url_for('static', filename='images/aelira.jpg') }}" alt="Aelira character portrait">
                    <figcaption>
                        <p>Aelira Kaldren</p>
                        <p>Human Witch/Kineticist</p>
                        <a href="{{ url_for('static', filename='images/aelira.pdf') }}" target="_blank"><u>Character Sheet</u></a>
                    </figcaption>
                </figure>
                <img src="{{ url_for('static', filename='images/aelira.jpg') }}" alt="Aelira" class="aelira">
        
                <figure>
                    <img src="{{ url_for('static', filename='images/alaric.jpg') }}" alt="Alaric">
                    <figcaption>
                        <p>Alaric Aethelred</p>
                        <p>Human Gunslinger/Inquistitor</p>
                        <a href="{{ url_for('static', filename='images/alaric.pdf') }}" target="_blank"><u>Character Sheet</u></a>
                    </figcaption>
                </figure>
                <img src="{{ url_for('static', filename='images/alaric.jpg') }}" alt="Alaric character sheet" class="alaric ">
            </div>
            <div class="empty"></div>
            <div class="subCon2">
                <figure>
                    <img src="{{ url_for('static', filename='images/joshua.jpg') }}" alt="Joshua">
                    <figcaption>
                        <p>Joshua</p>
                        <p>Human Druid/Monk</p>
                        <a href="{{ url_for('static', filename='images/joshua.pdf') }}" target="_blank"><u>Character Sheet</u></a>
                    </figcaption>
                </figure>
                <img src="{{ url_for('static', filename='images/joshua.jpg') }}" alt="Joshua character sheet" class="joshua ">
        
                <figure>
                    <img src="{{ url_for('static', filename='images/ivan.jpg') }}" alt="Ivan">
                    <figcaption>
                        <p>Ivan</p>
                        <p>Human Inquistitor/Wizard</p>
                        <a href="{{ url_for('static', filename='images/ivan.pdf') }}" target="_blank"><u>Character Sheet</u></a>
                    </figcaption>
                    
                </figure>
                <img src="{{ url_for('static', filename='images/ivan.jpg') }}" alt="Ivan character sheet" class="ivan ">
            </div>
        </div>
        <hr>
        <section class="container5">
            <h2>An excerpt from our last adventure entry:</h2>
            {% if latest_post %}
                <div class="blog2">
                    <h3>{{ latest_post.title }}</h3>
                    <h4>{{ latest_post.date_posted.strftime('%B %d, %Y') }}</h4>
            
                    <p>{{ first_paragraph }}</p>
            
                    <div class="blog2">
                        <p>You can find our entire story in the <a href="{{ url_for('posts.book', slug='snows-of-summer') }}">Adventure Log</a></p>
                    </div>
                </div>
            {% else %}
                <p>No blog posts yet. Stay tuned!</p>
            {% endif %}
        </section>
        <hr>
        <!-- HTML Structure for the Carousel. NOTE: CSS is here to make sure I like it in all formats. Move it to main.css-->
        <section class="gallery">
            <h2>Gallery</h2>
            <div class="carousel-container">
                <div class="carousel-track">
                    {% for img in images %}
                        <div class="carousel-slide">
                            <img src="{{ url_for('static', filename='images/' + img.image) }}" alt="Gallery Image">
                        </div>
                    {% else %}
                        <div class="carousel-empty">
                            <p>No images uploaded yet.</p>
                        </div>
                    {% endfor %}
                </div>
                
                <!-- Navigation Controls -->
                {% if images %}
                    <button class="carousel-button prev-button" aria-label="Previous image">&lt;</button>
                    <button class="carousel-button next-button" aria-label="Next image">&gt;</button>
                    
                    <!-- Dots for navigation -->
                    <div class="carousel-dots">
                        {% for img in images %}
                            <span class="dot" data-index="{{ loop.index0 }}"></span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </section>

        <!-- CSS Styling for the Carousel -->
        <!-- CSS Styling for the Carousel -->
        <style>
            .carousel-container {
                position: relative;
                max-width: 800px;
                margin: 0 auto;
                overflow: hidden;
                background-color: #2a2a2a; /* Match your dark background */
            }
            
            .carousel-track {
                display: flex;
                transition: transform 0.5s ease;
                height: 500px; /* Set a fixed height for the track */
            }
            
            .carousel-slide {
                min-width: 100%;
                box-sizing: border-box;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 0 40px; /* Add padding to account for the arrows */
            }
            
            .carousel-slide img {
                max-width: 100%;
                max-height: 100%;
                height: auto;
                width: auto;
                object-fit: contain;
                display: block;
                margin: 0 auto;
            }
            
            .carousel-button {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background-color: rgba(0, 0, 0, 0.7);
                color: white;
                border: 2px solid white;
                border-radius: 50%;
                width: 50px;
                height: 50px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                z-index: 10;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
                transition: all 0.2s ease;
            }
            
            .carousel-button:hover {
                background-color: rgba(0, 0, 0, 0.9);
                transform: translateY(-50%) scale(1.1);
            }
            
            .prev-button {
                left: 10px;
            }
            
            .next-button {
                right: 10px;
            }
            
            .carousel-dots {
                display: flex;
                justify-content: center;
                margin-top: 10px;
            }
            
            .dot {
                height: 10px;
                width: 10px;
                background-color: #bbb;
                border-radius: 50%;
                margin: 0 5px;
                cursor: pointer;
            }
            
            .dot.active {
                background-color: #717171;
            }
            
            .carousel-empty {
                width: 100%;
                padding: 40px;
                text-align: center;
                background-color: #f8f8f8;
            }
        </style>

        <!-- JavaScript for Carousel Functionality -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const track = document.querySelector('.carousel-track');
                const slides = document.querySelectorAll('.carousel-slide');
                const nextButton = document.querySelector('.next-button');
                const prevButton = document.querySelector('.prev-button');
                const dots = document.querySelectorAll('.dot');
                
                if (!track || slides.length === 0) return; // Exit if no carousel or slides
                
                let currentIndex = 0;
                
                // Set first dot as active
                if (dots.length > 0) {
                    dots[0].classList.add('active');
                }
                
                // Update carousel position
                function updateCarousel() {
                    track.style.transform = `translateX(-${currentIndex * 100}%)`;
                    
                    // Update active dot
                    dots.forEach((dot, index) => {
                        dot.classList.toggle('active', index === currentIndex);
                    });
                }
                
                // Next slide handler
                function nextSlide() {
                    currentIndex = (currentIndex + 1) % slides.length;
                    updateCarousel();
                }
                
                // Previous slide handler
                function prevSlide() {
                    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                    updateCarousel();
                }
                
                // Event listeners for buttons
                if (nextButton) {
                    nextButton.addEventListener('click', nextSlide);
                }
                
                if (prevButton) {
                    prevButton.addEventListener('click', prevSlide);
                }
                
                // Event listeners for dots
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', function() {
                        currentIndex = index;
                        updateCarousel();
                    });
                });
                
                // Keyboard navigation
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'ArrowRight') {
                        nextSlide();
                    } else if (e.key === 'ArrowLeft') {
                        prevSlide();
                    }
                });
                
                // Touch swipe functionality
                let touchStartX = 0;
                let touchEndX = 0;
                
                track.addEventListener('touchstart', function(e) {
                    touchStartX = e.changedTouches[0].screenX;
                });
                
                track.addEventListener('touchend', function(e) {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                });
                
                function handleSwipe() {
                    if (touchEndX < touchStartX - 50) {
                        nextSlide(); // Swipe left, go next
                    } else if (touchEndX > touchStartX + 50) {
                        prevSlide(); // Swipe right, go previous
                    }
                }
                
                // Optional: Auto-play functionality
                // Uncomment the following code if you want auto-play
                /*
                let autoplayInterval;
                
                function startAutoplay() {
                    autoplayInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
                }
                
                function stopAutoplay() {
                    clearInterval(autoplayInterval);
                }
                
                // Start autoplay on page load
                startAutoplay();
                
                // Pause autoplay on hover
                track.addEventListener('mouseenter', stopAutoplay);
                track.addEventListener('mouseleave', startAutoplay);
                */
            });
        </script>      
    </main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/scrollEffect.js') }}"></script>
{% endblock %}